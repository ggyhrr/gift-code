# Kingshot Gift Code 管理工具

[![Powered by OpenAI GPT-5](https://img.shields.io/badge/Powered%20by-OpenAI%20GPT--5-blue)](https://openai.com/)

輕量、純前端的多帳號 Gift Code 批次領取工具，一鍵順序處理所有帳號。

> 所有資料僅儲存在瀏覽器 localStorage，不上傳伺服器。
>
> 語言： [English](./README.md) | [繁體中文](./README.zh-TW.md) | [한국어](./README.ko-KR.md)

## 🌐 使用步驟

1. 開啟頁面（會立即載入先前儲存的帳號與快取玩家資料，不會自動重新驗證）
2. 手動新增或從文字檔匯入帳號
3. 輸入 Gift Code
4. 按下領取批次處理（每個帳號在送出領取前都會重新查詢一次最新玩家資訊）
5. 即時查看每個帳號狀態與最終結果（成功 / 已領取 / 不存在 / 超過次數 / 過期 / 失敗）

## 🧾 功能

### 1. 帳號管理

- 手動新增（純數字 ID）→ 新增時即查詢驗證
- 文字檔匯入：一行一個，`#` 註解忽略，顯示匯入進度（剩餘 / 總數）
- 匯出純文字
- 單筆刪除（批次中刪除立即跳過）
- 新增 / 匯入後自動捲動到列表底部

### 2. Gift Code 批次領取

- 逐一順序執行（可調延遲）
- 每次送出前重新抓取該帳號玩家資訊（確保顯示最新暱稱 / 王國 / 城堡等級）
- 結果分類：成功 / 已領取 / 不存在 / 超過次數 / 過期 / 失敗
- 開始新批次前會把上一批成功/失敗狀態重置為 idle

### 3. 狀態面板

- 計數：處理中（剩餘動態倒數）/ 成功 / 失敗
- 進度條：已處理 (成功 + 失敗) / 本批總數
- 成功率顯示
- 無重複計數的即時剩餘

### 4. 多語介面

- 繁體中文 / English / 한국어
- 語言選擇會被記住

### 5. API 請求間隔可調

- 用於新增時的驗證與批次領取
- 選項：0.5s / 1s / 1.5s / 2s / 3s（key: `kingshot-delay-ms`）
- 預設 2s（平衡速度與穩定）
- 過低可能增加暫時錯誤或被限制

### 6. 本地資料與最小持久化

- 無伺服器；全部存在 localStorage
- 僅儲存最小必要資訊（id, accountNumber, playerInfo, isValidated），不保存批次成功/失敗結果
- 重新載入頁面不會自動對全部帳號重驗證（啟動更快）

### 7. 執行期資料結構範例

```json
{
  "id": "1736400000000-0",
  "accountNumber": "12345678",
  "status": "idle", // 執行期狀態，儲存時一律 idle
  "isValidated": true,
  "lastResult": "領取成功！", // 不會被持久化
  "playerInfo": {
    "nickname": "Mad King",
    "kid": 59,
    "stove_lv": 25,
    "stove_lv_content": "<img url>",
    "avatar_image": "<img url>",
    "fid": 12345678,
    "total_recharge_amount": 0
  }
}
```

匯入 / 匯出只需 `accountNumber`；其餘欄位需要時再取得。

### 8. 快速提示

- Enter：新增 / 送出 Gift Code
- Esc：取消新增輸入
- 匯入前清理空行與重複
- 多帳號建議間隔 ≥1s

## 📁 匯入檔案範例

```
# 我的帳號
1234567
7654321
# 其他
99887766
```

## ❓ 常見問題 FAQ

| 問題                         | 說明                                                   |
| ---------------------------- | ------------------------------------------------------ |
| 為何重新開啟後沒有自動驗證？ | 為了加快啟動，只保留快取資料；必要時在領取前再查一次。 |
| 何時重新抓玩家資訊？         | 新增帳號時與該帳號送出領取前。                         |
| 新增時驗證失敗               | 可能帳號不存在或暫時網路問題，可稍後重試。             |
| 同一禮包碼重複領？           | 已領取會回傳對應狀態，不會重複成功。                   |
| 顯示不存在 / 過期？          | 可能已失效或輸入錯誤。                                 |
| 批次中刪除帳號有效嗎？       | 會立即跳過後續請求。                                   |
| 換裝置資料不在？             | 從舊瀏覽器匯出後再匯入。                               |
| 0.5s 是否安全？              | 少量帳號可；大量帳號建議 ≥1s。                         |
| 為何處理中數字會下降？       | 顯示的是剩餘數；已完成立即移入成功/失敗計數。          |

## 🧹 清除所有帳號

1. 逐一刪除，或
2. 清除該站點 localStorage

## 🛠 開發者

技術棧：React + Vite + TypeScript + Tailwind CSS + i18next

安裝 / 啟動：

```
pnpm install
pnpm dev
```

## ⚠️ 免責聲明

本工具僅提供使用便利，最終領取結果以官方系統為準，請遵守遊戲規範。

---

多語與部分說明文字由 AI 協助產生並人工審核，歡迎回饋或協助新增語言！
